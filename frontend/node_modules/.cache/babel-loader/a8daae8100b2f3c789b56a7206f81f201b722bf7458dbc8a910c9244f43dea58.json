{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//import router from '@/router';\n\nimport axios from 'axios';\nexport default {\n  name: \"ManageFlaggedPosts\",\n  data() {\n    return {\n      data: null,\n      selected: null,\n      selected_ticket: null,\n      flagged_ticket_ids: [],\n      pending_tickets: [],\n      approved_tickets: []\n    };\n  },\n  methods: {\n    async approveFlag(thing) {\n      var status = await axios.patch('/api/flaggedPosts', {\n        ticket_id: thing,\n        is_approved: true\n      });\n      console.log(status);\n      this.$router.go();\n    },\n    async rejectFlag(thing) {\n      var status = await axios.patch('/api/flaggedPosts', {\n        ticket_id: thing,\n        is_rejected: true\n      });\n      console.log(status);\n      this.$router.go();\n    }\n  },\n  async created() {\n    var res3 = await axios.get('/api/flaggedPosts');\n    this.data = res3.data.data;\n    this.flagged_ticket_ids = this.data.map(({\n      ticket_id\n    }) => ticket_id);\n    var res2 = await axios.get('/api/ticketAll');\n    for (var i = 0; i < res2.data.data.length; i++) {\n      if (res2.data.data[i].is_offensive) {\n        // eslint-disable-next-line\n        if (this.flagged_ticket_ids.includes(res2.data.data[i].ticket_id)) {\n          for (var j = 0; j < this.data.length; j++) {\n            if (this.data[j].ticket_id == res2.data.data[i].ticket_id) {\n              if (this.data[j].is_approved && !this.data[j].is_rejected) {\n                this.approved_tickets.push(res2.data.data[i]);\n              } else if (!this.data[j].is_approved && !this.data[j].is_rejected) {\n                this.pending_tickets.push(res2.data.data[i]);\n              }\n            }\n          }\n        }\n      }\n    }\n    console.log(res2);\n  },\n  computed: {}\n};","map":{"version":3,"names":["axios","name","data","selected","selected_ticket","flagged_ticket_ids","pending_tickets","approved_tickets","methods","approveFlag","thing","status","patch","ticket_id","is_approved","console","log","$router","go","rejectFlag","is_rejected","created","res3","get","map","res2","i","length","is_offensive","includes","j","push","computed"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\soft-engg-project-jan-2024-se-jan-1\\frontend\\src\\components\\ManageFlaggedPosts.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"topic-container\">\r\n            <h3 style=\"color: aliceblue; text-align: center;\"><b>The following tickets have been flagged. </b></h3>\r\n            <br />\r\n            <hr />\r\n            <div class=\"container\" v-for=\"(t, index) in pending_tickets\" :key=\"index\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-10\">\r\n                        <RouterLink :to=\"{ name: 'response', params: { ticketId: t.ticket_id } }\">\r\n                            <p class=\"ticket-title\">\r\n                                {{ t.title }}\r\n                            </p>\r\n                        </RouterLink>\r\n                        <p>{{ t.description }}</p>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn upvote disabled\">^<br>{{ t.number_of_upvotes }}</button>\r\n                        <br />\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn btn-success rounded\" @click=\"approveFlag(t.ticket_id)\"> Approve </button>\r\n                    </div>\r\n                    <div class=\"col-md-8\">\r\n\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn btn-danger rounded\" @click=\"rejectFlag(t.ticket_id)\"> Reject </button>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n            </div>\r\n            <div class=\"container\" v-for=\"(t, index) in approved_tickets\" :key=\"index\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-10\">\r\n                        <RouterLink :to=\"{ name: 'response', params: { ticketId: t.ticket_id } }\">\r\n                            <p class=\"ticket-title\">\r\n                                {{ t.title }}\r\n                            </p>\r\n                        </RouterLink>\r\n                        <p>{{ t.description }}</p>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-2\">\r\n                        <div class=\"row\">\r\n                            <button class=\"btn upvote disabled\">^<br>{{ t.number_of_upvotes }}</button>\r\n                        </div>\r\n                        <br />\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n            </div>\r\n        </div>\r\n        <br />\r\n        <!-- Modal -->\r\n\r\n    </div>\r\n</template>\r\n<script>\r\n//import router from '@/router';\r\n\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"ManageFlaggedPosts\",\r\n    data() {\r\n        return {\r\n            data: null,\r\n            selected: null,\r\n            selected_ticket: null,\r\n            flagged_ticket_ids: [],\r\n            pending_tickets: [],\r\n            approved_tickets: []\r\n        };\r\n\r\n    },\r\n    methods: {\r\n        async approveFlag(thing) {\r\n            var status = await axios.patch('/api/flaggedPosts', { ticket_id: thing, is_approved: true });\r\n            console.log(status);\r\n            this.$router.go();\r\n        },\r\n        async rejectFlag(thing) {\r\n            var status = await axios.patch('/api/flaggedPosts', { ticket_id: thing, is_rejected: true });\r\n            console.log(status);\r\n            this.$router.go();\r\n        }\r\n    },\r\n    async created() {\r\n        var res3 = await axios.get('/api/flaggedPosts');\r\n        this.data = res3.data.data;\r\n        this.flagged_ticket_ids = this.data.map(({ ticket_id }) => ticket_id);\r\n        var res2 = await axios.get('/api/ticketAll');\r\n        for (var i = 0; i < res2.data.data.length; i++) {\r\n            if (res2.data.data[i].is_offensive) {\r\n                // eslint-disable-next-line\r\n                if (this.flagged_ticket_ids.includes(res2.data.data[i].ticket_id)) {\r\n                    for (var j = 0; j < this.data.length; j++) {\r\n                        if (this.data[j].ticket_id == res2.data.data[i].ticket_id) {\r\n                            if (this.data[j].is_approved && !this.data[j].is_rejected) {\r\n                                this.approved_tickets.push(res2.data.data[i])\r\n                            }\r\n                            else if (!this.data[j].is_approved && !this.data[j].is_rejected) {\r\n                                this.pending_tickets.push(res2.data.data[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        console.log(res2);\r\n    },\r\n    computed: {\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.topic-container {\r\n    margin: 33px 63px;\r\n}\r\n\r\n.upvote {\r\n    font-size: 20px;\r\n}\r\n\r\n.ticket-title {\r\n    font-weight: bold;\r\n    font-size: 25px;\r\n}\r\n\r\n.btn a {\r\n    color: rgb(255, 255, 255);\r\n    text-decoration: none;\r\n}\r\n\r\na {\r\n    color: rgb(0, 0, 0);\r\n    text-decoration: none;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}