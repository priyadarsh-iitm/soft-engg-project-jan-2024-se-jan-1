{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"ChangePasswordComponent\",\n  data() {\n    return {\n      email: \"\",\n      oldPassword: \"\",\n      newPassword: \"\"\n    };\n  },\n  methods: {\n    async loginUser(e) {\n      e.preventDefault();\n      console.log(this.email, this.password);\n      await axios.post(\"/login\", {\n        email: this.email,\n        password: this.oldPassword\n      }).then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          this.changePassword(res.data.token, res.data.user_id);\n        } else {\n          alert(res.data.message);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    async changePassword(token, user_id) {\n      var data = {\n        user_id: user_id,\n        email: this.email,\n        password: this.newPassword\n      };\n      data = JSON.stringify(data);\n      await axios.patch(\"/api/user\", data).then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          alert(\"Password changed successfully\");\n          this.$router.push(\"/\");\n        } else {\n          alert(res.data.message);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","email","oldPassword","newPassword","methods","loginUser","e","preventDefault","console","log","password","post","then","res","status","changePassword","token","user_id","alert","message","catch","err","JSON","stringify","patch","$router","push"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\frontend\\src\\components\\ChangePasswordComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <h1 class=\"text-center\">Change Password</h1>\r\n        <form @submit.prevent=\"loginUser\">\r\n            <div class=\"form-group\">\r\n                <label>Email</label>\r\n                <input type=\"text\" v-model=\"email\" class=\"form-control\" placeholder=\"Enter Email\" autocomplete=\"off\"\r\n                    required />\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Old Password</label>\r\n                <input type=\"password\" v-model=\"oldPassword\" class=\"form-control\" placeholder=\"Password\" autocomplete=\"off\"\r\n                    required />\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>New Password</label>\r\n                <input type=\"password\" v-model=\"newPassword\" class=\"form-control\" placeholder=\"Password\" autocomplete=\"off\"\r\n                    required />\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary btn-lg\">Submit</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"ChangePasswordComponent\",\r\n    data() {\r\n        return {\r\n            email: \"\",\r\n            oldPassword: \"\",\r\n            newPassword: \"\"\r\n        };\r\n    },\r\n    methods: {\r\n        async loginUser(e) {\r\n            e.preventDefault();\r\n            console.log(this.email, this.password);\r\n            await axios.post(\"/login\", {\r\n                email: this.email,\r\n                password: this.oldPassword\r\n            }).then(res => {\r\n                console.log(res);\r\n                if (res.status == 200) {\r\n                    this.changePassword(res.data.token,res.data.user_id);\r\n                } else {\r\n                    alert(res.data.message);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        },\r\n        async changePassword(token,user_id) {\r\n            var data = {\r\n                user_id: user_id,\r\n                email: this.email,\r\n                password: this.newPassword\r\n            }\r\n            data=JSON.stringify(data);\r\n            await axios.patch(\"/api/user\", data).then(res => {\r\n                console.log(res);\r\n                if (res.status == 200) {\r\n                    alert(\"Password changed successfully\");\r\n                    this.$router.push(\"/\");\r\n                } else {\r\n                    alert(res.data.message);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n.container {\r\n    /* border: #40cbea solid 2px;\r\n    border-radius: 20px; */\r\n    font-family: \"Muli\", sans-serif;\r\n    margin-top: 50px;\r\n    width: 50%;\r\n    padding: 20px 40px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n}\r\n\r\n.container h1 {\r\n    text-align: center;\r\n    margin-bottom: 30px;\r\n    font-size: 50px;\r\n}\r\n\r\n.form-group {\r\n    margin-bottom: 25px;\r\n}\r\n\r\nlabel {\r\n    font-size: 20px;\r\n    font-weight: 500;\r\n    color: #333;\r\n    margin-bottom: 5px;\r\n}\r\n</style>\r\n  "],"mappings":";AAyBA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACXC,IAAI,EAAE,yBAAyB;EAC/BC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE;IACjB,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,SAASA,CAACC,CAAC,EAAE;MACfA,CAAC,CAACC,cAAc,EAAE;MAClBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACR,KAAK,EAAE,IAAI,CAACS,QAAQ,CAAC;MACtC,MAAMZ,KAAK,CAACa,IAAI,CAAC,QAAQ,EAAE;QACvBV,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBS,QAAQ,EAAE,IAAI,CAACR;MACnB,CAAC,CAAC,CAACU,IAAI,CAACC,GAAE,IAAK;QACXL,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC;QAChB,IAAIA,GAAG,CAACC,MAAK,IAAK,GAAG,EAAE;UACnB,IAAI,CAACC,cAAc,CAACF,GAAG,CAACb,IAAI,CAACgB,KAAK,EAACH,GAAG,CAACb,IAAI,CAACiB,OAAO,CAAC;QACxD,OAAO;UACHC,KAAK,CAACL,GAAG,CAACb,IAAI,CAACmB,OAAO,CAAC;QAC3B;MACJ,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;MACpB,CAAC,CAAC;IACN,CAAC;IACD,MAAMN,cAAcA,CAACC,KAAK,EAACC,OAAO,EAAE;MAChC,IAAIjB,IAAG,GAAI;QACPiB,OAAO,EAAEA,OAAO;QAChBhB,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBS,QAAQ,EAAE,IAAI,CAACP;MACnB;MACAH,IAAI,GAACsB,IAAI,CAACC,SAAS,CAACvB,IAAI,CAAC;MACzB,MAAMF,KAAK,CAAC0B,KAAK,CAAC,WAAW,EAAExB,IAAI,CAAC,CAACY,IAAI,CAACC,GAAE,IAAK;QAC7CL,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC;QAChB,IAAIA,GAAG,CAACC,MAAK,IAAK,GAAG,EAAE;UACnBI,KAAK,CAAC,+BAA+B,CAAC;UACtC,IAAI,CAACO,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;QAC1B,OAAO;UACHR,KAAK,CAACL,GAAG,CAACb,IAAI,CAACmB,OAAO,CAAC;QAC3B;MACJ,CAAC,CAAC,CAACC,KAAK,CAACC,GAAE,IAAK;QACZb,OAAO,CAACC,GAAG,CAACY,GAAG,CAAC;MACpB,CAAC,CAAC;IAGN;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}