{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"DashboardStudentComponent\",\n  data() {\n    return {\n      tickets: [],\n      rating: null,\n      selected_ticket: null\n    };\n  },\n  async created() {\n    await axios.get(\"/api/ticket\").then(res => {\n      // console.log(res.data.data);\n      for (var i = 0; i < res.data.data.length; i++) {\n        this.tickets.push(res.data.data[i]);\n      }\n    });\n  },\n  methods: {\n    async submitRating() {\n      var data = {\n        ticket_id: this.selected_ticket,\n        rating: this.rating\n      };\n      const response = await axios.patch('/api/ticket', data);\n      console.log(response);\n    },\n    async increaseVote(ticket_id, upVotes) {\n      var data = {\n        ticket_id: ticket_id,\n        number_of_upvotes: upVotes + 1\n      };\n      data = JSON.stringify(data);\n      await axios.patch(\"/api/ticket\", data).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.$router.go();\n    },\n    async deleteTicket(ticket_id) {\n      await axios.delete(\"/api/ticket/\" + ticket_id).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.$router.go();\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","tickets","rating","selected_ticket","created","get","then","res","i","length","push","methods","submitRating","ticket_id","response","patch","console","log","increaseVote","upVotes","number_of_upvotes","JSON","stringify","catch","err","$router","go","deleteTicket","delete"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\soft-engg-project-jan-2024-se-jan-1\\frontend\\src\\components\\DashboardStudentComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"topic-container\">\r\n            <div  v-for=\"(t, index) in tickets\"  :key=\"index\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-10\">\r\n                        <RouterLink :to=\"{ name: 'response', params: { ticketId: t.ticket_id } }\">\r\n                            <p class=\"ticket-title\">\r\n                                {{ t.title }}\r\n                            </p>\r\n                        </RouterLink>\r\n                        <div class=\"btn-grp\">\r\n                            <div v-if=\"t.is_open == 0\">\r\n                                <span class=\"d-inline-block\" tabindex=\"0\" data-toggle=\"tooltip\" title=\"Support agent has marked this ticket as closed. To reopen, simply reply with your query\">\r\n                                <button class=\"btn btn-success btn-sm disabled\">Ticket Closed <i class=\"bi bi-patch-question-fill\"></i></button>\r\n                                </span>\r\n                            </div>\r\n                            <div v-else-if=\"t.is_open==1 && t.is_read==0\">\r\n                                <span class=\"d-inline-block\" tabindex=\"0\" data-toggle=\"tooltip\" title=\"This ticket is still hasn't been read by a support agent. Please wait 48 hours before escalating.\">\r\n                                <button class=\"btn btn-sm btn-outline-danger disabled\">Unread <i class=\"bi bi-patch-question-fill\"></i></button>\r\n                                </span>\r\n                            </div>\r\n                            <div v-if=\"t.is_open==1 && t.is_read == 1\">\r\n                                <span class=\"d-inline-block\" tabindex=\"0\" data-toggle=\"tooltip\" title=\"A support agent has read your query. Please wait as they will respond shortly\">\r\n                                <button class=\"btn btn-sm btn-outline-success disabled\">Read <i class=\"bi bi-patch-question-fill\"></i></button>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <br/>\r\n                        <p>{{ t.description }}</p>\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <div class=\"row\">\r\n                            <button class=\"btn upvote\" @click=\"increaseVote(t.ticket_id, t.number_of_upvotes)\">^<br>{{\r\n                                t.number_of_upvotes }}</button>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"btn-group\">\r\n                                <button type=\"button\" class=\"btn dropdown-toggle\" data-bs-toggle=\"dropdown\">\r\n                                    Options\r\n                                </button>\r\n                                <ul class=\"dropdown-menu\">\r\n                                    <li class=\"dropdown-item text-center\" @click=\"deleteTicket(t.ticket_id)\" style=\"cursor: pointer;\"> Delete </li>\r\n                                    <li class=\"dropdown-item text-center\">\r\n                                        <RouterLink :to=\"{ name: 'editTicket', params: { ticketId: t.ticket_id } }\">\r\n                                            Edit\r\n                                        </RouterLink>\r\n                                    </li>\r\n                                    <li class=\"dropdown-item text-center\" data-bs-toggle=\"modal\" data-bs-target=\"#ratingModal\" v-if=\"t.is_open==0\" @click=\"this.selected_ticket=t.ticket_id\"> Rate Resolution\r\n\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <!-- <button class=\"btn btn-info\" data-bs-toggle=\"modal\" data-bs-target=\"#ratingModal\" v-if=\"t.is_open==0\" @click=\"this.selected_ticket=t.ticket_id\">Rate Resolution</button> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center\">\r\n            <button class=\"btn btn-primary\">\r\n                <RouterLink to=\"/addTicket\">New Ticket</RouterLink>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <!-- Modal -->\r\n<div class=\"modal fade\" id=\"ratingModal\" tabindex=\"-1\" aria-labelledby=\"ratingModalLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"ratingModalLabel\"> Please rate the resolution of this ticket</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n    <label for=\"myChoice1\">Very Unhappy<br />\r\n        <input type=\"radio\" v-model=\"rating\" value=\"1\" id=\"myChoice1\"> \r\n    </label>\r\n    <label for=\"myChoice2\">Unhappy<br />\r\n        <input type=\"radio\" v-model=\"rating\" value=\"2\" id=\"myChoice2\"> \r\n    </label>\r\n    <label for=\"myChoice3\">Neutral<br />\r\n        <input type=\"radio\" v-model=\"rating\" value=\"3\" id=\"myChoice3\"> \r\n    </label>\r\n    <label for=\"myChoice4\">Happy<br />\r\n        <input type=\"radio\" v-model=\"rating\" value=\"4\" id=\"myChoice4\"> \r\n    </label>\r\n    <label for=\"myChoice5\">Very Happy<br />\r\n        <input type=\"radio\" v-model=\"rating\" value=\"5\" id=\"myChoice5\">\r\n    </label>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" @click=\"submitRating()\">Submit</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"DashboardStudentComponent\",\r\n    data() {\r\n        return {\r\n            tickets: [],\r\n            rating: null,\r\n            selected_ticket: null,\r\n        };\r\n    },\r\n    async created() {\r\n        await axios.get(\"/api/ticket\").then((res) => {\r\n            // console.log(res.data.data);\r\n            for (var i = 0; i < res.data.data.length; i++) {\r\n                this.tickets.push(res.data.data[i]);\r\n            }\r\n        });\r\n    },\r\n    methods: {\r\n        async submitRating() {\r\n            var data = {\r\n                ticket_id: this.selected_ticket,\r\n                rating: this.rating\r\n            }\r\n            const response = await axios.patch('/api/ticket', data)\r\n            console.log(response)\r\n        },\r\n        async increaseVote(ticket_id, upVotes) {\r\n            var data = {\r\n                ticket_id: ticket_id,\r\n                number_of_upvotes: upVotes + 1\r\n            }\r\n            data = JSON.stringify(data);\r\n            await axios.patch(\"/api/ticket\", data).then((res) => {\r\n                console.log(res);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n            this.$router.go();\r\n        },\r\n        async deleteTicket(ticket_id) {\r\n            await axios.delete(\"/api/ticket/\" + ticket_id).then((res) => {\r\n                console.log(res);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n            this.$router.go();\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.topic-container {\r\n    margin: 33px 63px;\r\n}\r\n\r\n.upvote {\r\n    font-size: 20px;\r\n}\r\n\r\n.ticket-title {\r\n    font-weight: bold;\r\n    font-size: 25px;\r\n}\r\n\r\n.btn a {\r\n    color: rgb(255, 255, 255);\r\n    text-decoration: none;\r\n}\r\n\r\na {\r\n    color: rgb(0, 0, 0);\r\n    text-decoration: none;\r\n}\r\n/* .closed {\r\n    border: none;\r\n    background: #2fe72f;\r\n    border-radius: 10%;\r\n    color: white;\r\n    margin-bottom: 5px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.open {\r\n    border: none;\r\n    background: #e7572f;\r\n    border-radius: 10%;\r\n    color: white;\r\n    margin-bottom: 5px;\r\n    margin-right: 10px;\r\n} */\r\n.btn-grp {\r\n    display: flex;\r\n    flex-direction: row;\r\n    /* margin-right: 2px; */\r\n}\r\n\r\nlabel {\r\n  float: left;\r\n  padding: 0 1em;\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":";AAoGA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACXC,IAAI,EAAE,2BAA2B;EACjCC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE,IAAI;MACZC,eAAe,EAAE;IACrB,CAAC;EACL,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACZ,MAAMN,KAAK,CAACO,GAAG,CAAC,aAAa,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;MACzC;MACA,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAID,GAAG,CAACP,IAAI,CAACA,IAAI,CAACS,MAAM,EAAED,CAAC,EAAE,EAAE;QAC3C,IAAI,CAACP,OAAO,CAACS,IAAI,CAACH,GAAG,CAACP,IAAI,CAACA,IAAI,CAACQ,CAAC,CAAC,CAAC;MACvC;IACJ,CAAC,CAAC;EACN,CAAC;EACDG,OAAO,EAAE;IACL,MAAMC,YAAYA,CAAA,EAAG;MACjB,IAAIZ,IAAG,GAAI;QACPa,SAAS,EAAE,IAAI,CAACV,eAAe;QAC/BD,MAAM,EAAE,IAAI,CAACA;MACjB;MACA,MAAMY,QAAO,GAAI,MAAMhB,KAAK,CAACiB,KAAK,CAAC,aAAa,EAAEf,IAAI;MACtDgB,OAAO,CAACC,GAAG,CAACH,QAAQ;IACxB,CAAC;IACD,MAAMI,YAAYA,CAACL,SAAS,EAAEM,OAAO,EAAE;MACnC,IAAInB,IAAG,GAAI;QACPa,SAAS,EAAEA,SAAS;QACpBO,iBAAiB,EAAED,OAAM,GAAI;MACjC;MACAnB,IAAG,GAAIqB,IAAI,CAACC,SAAS,CAACtB,IAAI,CAAC;MAC3B,MAAMF,KAAK,CAACiB,KAAK,CAAC,aAAa,EAAEf,IAAI,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAK;QACjDS,OAAO,CAACC,GAAG,CAACV,GAAG,CAAC;MACpB,CAAC,CAAC,CAACgB,KAAK,CAAEC,GAAG,IAAK;QACdR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;MACpB,CAAC,CAAC;MACF,IAAI,CAACC,OAAO,CAACC,EAAE,EAAE;IACrB,CAAC;IACD,MAAMC,YAAYA,CAACd,SAAS,EAAE;MAC1B,MAAMf,KAAK,CAAC8B,MAAM,CAAC,cAAa,GAAIf,SAAS,CAAC,CAACP,IAAI,CAAEC,GAAG,IAAK;QACzDS,OAAO,CAACC,GAAG,CAACV,GAAG,CAAC;MACpB,CAAC,CAAC,CAACgB,KAAK,CAAEC,GAAG,IAAK;QACdR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;MACpB,CAAC,CAAC;MACF,IAAI,CAACC,OAAO,CAACC,EAAE,EAAE;IACrB;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}