{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-63fb9888\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"topic-container\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"ticket-title\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Responses :\", -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"response\"\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_13 = {\n  class: \"row\"\n};\nconst _hoisted_14 = {\n  class: \"col-md-10\"\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-2\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-primary\",\n  type: \"submit\"\n}, \"Submit\")], -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", _hoisted_4, _toDisplayString($data.title), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($data.description), 1 /* TEXT */)]), _hoisted_5, _hoisted_6, _hoisted_7, _hoisted_8, _hoisted_9, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.responses, r => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: r.response_id\n    }, [_createElementVNode(\"p\", _hoisted_10, _toDisplayString(r.response), 1 /* TEXT */), _hoisted_11, _hoisted_12]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.addResponse && $options.addResponse(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.response = $event),\n    placeholder: \"Enter Response\",\n    rows: \"10\",\n    required: \"\"\n  }, \" \", 512 /* NEED_PATCH */), [[_vModelText, $data.response]])]), _hoisted_15])], 32 /* HYDRATE_EVENTS */)])]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$data","title","description","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","responses","r","key","response_id","_hoisted_10","response","_hoisted_11","_hoisted_12","onSubmit","_cache","_withModifiers","args","$options","addResponse","_hoisted_13","_hoisted_14","$event","placeholder","rows","required","_hoisted_15"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\frontend\\src\\components\\ResponseComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"topic-container\">\r\n            <div class=\"row\">\r\n                <p class=\"ticket-title\">{{ title }}</p>\r\n                <p>{{ description }}</p>\r\n            </div>\r\n            <br />\r\n            <hr />\r\n            <h3>Responses :</h3>\r\n            <hr />\r\n            <br />\r\n            <div v-for=\"r in responses\" :key=\"r.response_id\">\r\n                <p class=\"response\">{{ r.response }}</p>\r\n                <br />\r\n                <hr />\r\n            </div>\r\n            <form v-on:submit.prevent=\"addResponse\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-10\">\r\n                        <textarea class=\"form-control\" v-model=\"response\" placeholder=\"Enter Response\" rows=\"10\" required> </textarea>\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn btn-primary\" type=\"submit\">Submit</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n    name: \"ResponseComponent\",\r\n    computed: {\r\n        ...mapGetters([\"role\", \"user_id\"]),\r\n    },\r\n    data() {\r\n        return {\r\n            title: \"\",\r\n            description: \"\",\r\n            is_read: 0,\r\n            is_open: null,\r\n            ticket_id: this.$route.params.ticketId,\r\n            cid : null,\r\n            response: \"\",\r\n            responses: []\r\n        };\r\n    },\r\n    methods: {\r\n        async editOpen() {\r\n            // If ticket is marked as close and student replies then ticket gets reopened\r\n            if (this.$store.state.role==1 && !this.is_open && this.$store.state.user_id==this.cid) {\r\n                let response = await axios.patch('/api/ticket', {\r\n                    ticket_id: this.ticket_id,\r\n                    is_open: true\r\n                });\r\n                console.log(response);\r\n            } else if (this.$store.state.role==2 && this.is_open) {\r\n                let response = await axios.patch('/api/ticketAll', {\r\n                    ticket_id: this.ticket_id,\r\n                    is_open: false\r\n                });\r\n                console.log(response);\r\n            }\r\n        },\r\n        async addResponse() {\r\n            // console.log(this.response)\r\n            await axios.post(\"/api/respTicket\", {\r\n                ticket_id: this.ticket_id,\r\n                response: this.response\r\n            }).then((res) => {\r\n                this.editOpen();\r\n                this.response = \"\";\r\n                this.$router.go();\r\n                console.log(res);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n    },\r\n    async created() {\r\n        await axios.get(\"/api/ticketAll\").then((res) => {\r\n            // console.log(res.data.data);\r\n            for (var i = 0; i < res.data.data.length; i++) {\r\n                if (this.ticket_id == res.data.data[i].ticket_id) {\r\n                    this.title = res.data.data[i].title;\r\n                    this.description = res.data.data[i].description;\r\n                    this.is_read = res.data.data[i].is_read;\r\n                    this.is_open = res.data.data[i].is_open;\r\n                    this.cid = res.data.data[i].creator_id;\r\n                }\r\n            }\r\n        });\r\n        const role = localStorage.getItem(\"role\");\r\n        if (role == 2 && this.is_read == 0) {\r\n            await axios.patch(\"/api/ticketAll\", {\r\n                ticket_id: this.ticket_id,\r\n                is_read: 1\r\n            }).then((res) => {\r\n                console.log(res);\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n        var data = {\r\n            ticket_id: this.ticket_id\r\n        }\r\n        data = JSON.stringify(data);\r\n        await axios.post(\"/api/getResponseAPI_by_ticket\", data).then((res) => {\r\n            // console.log(res.data.data);\r\n            for (var i = 0; i < res.data.data.length; i++) {\r\n                this.responses.push(res.data.data[i]);\r\n            }\r\n        }).catch((err) => {\r\n            console.log(err);\r\n        });\r\n\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n.topic-container {\r\n    margin: 33px 63px;\r\n}\r\n\r\n.upvote {\r\n    font-size: 20px;\r\n}\r\n\r\n.ticket-title {\r\n    font-weight: bold;\r\n    font-size: 25px;\r\n}\r\n\r\n.response {\r\n    font-size: 20px;\r\n\r\n}\r\n\r\na {\r\n    color: rgb(255, 255, 255);\r\n    text-decoration: none;\r\n}\r\n\r\n.dropdown-menu a {\r\n    color: rgb(0, 0, 0);\r\n    text-decoration: none;\r\n}\r\n</style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAiB;;EACnBA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAc;gEAG3BC,mBAAA,CAAM;gEACNA,mBAAA,CAAM;gEACNA,mBAAA,CAAoB,YAAhB,aAAW;gEACfA,mBAAA,CAAM;gEACNA,mBAAA,CAAM;;EAECD,KAAK,EAAC;AAAU;iEACnBC,mBAAA,CAAM;iEACNA,mBAAA,CAAM;;EAGDD,KAAK,EAAC;AAAK;;EACPA,KAAK,EAAC;AAAW;iEAGtBC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAU,I,aACjBC,mBAAA,CAA6D;EAArDD,KAAK,EAAC,iBAAiB;EAACE,IAAI,EAAC;GAAS,QAAM,E;;;uBAtBxEC,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BFH,mBAAA,CAyBM,OAzBNI,UAyBM,GAxBFJ,mBAAA,CAGM,OAHNK,UAGM,GAFFL,mBAAA,CAAuC,KAAvCM,UAAuC,EAAAC,gBAAA,CAAZC,KAAA,CAAAC,KAAK,kBAChCT,mBAAA,CAAwB,WAAAO,gBAAA,CAAlBC,KAAA,CAAAE,WAAW,iB,GAErBC,UAAM,EACNC,UAAM,EACNC,UAAoB,EACpBC,UAAM,EACNC,UAAM,G,kBACNb,mBAAA,CAIMc,SAAA,QAAAC,WAAA,CAJWT,KAAA,CAAAU,SAAS,EAAdC,CAAC;yBAAbjB,mBAAA,CAIM;MAJuBkB,GAAG,EAAED,CAAC,CAACE;QAChCrB,mBAAA,CAAwC,KAAxCsB,WAAwC,EAAAf,gBAAA,CAAjBY,CAAC,CAACI,QAAQ,kBACjCC,WAAM,EACNC,WAAM,C;kCAEVzB,mBAAA,CASO;IATI0B,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;MAClC7B,mBAAA,CAOM,OAPNgC,WAOM,GANFhC,mBAAA,CAEM,OAFNiC,WAEM,G,gBADFjC,mBAAA,CAA8G;IAApGD,KAAK,EAAC,cAAc;+DAAUS,KAAA,CAAAe,QAAQ,GAAAW,MAAA;IAAEC,WAAW,EAAC,gBAAgB;IAACC,IAAI,EAAC,IAAI;IAACC,QAAQ,EAAR;KAAS,GAAC,0B,cAA3D7B,KAAA,CAAAe,QAAQ,E,KAEpDe,WAEM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}