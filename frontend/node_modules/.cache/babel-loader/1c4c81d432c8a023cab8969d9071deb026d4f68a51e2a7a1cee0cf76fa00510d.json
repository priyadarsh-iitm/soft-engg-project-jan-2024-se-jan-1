{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//import router from '@/router';\n\nimport axios from 'axios';\nexport default {\n  name: \"ManageFAQSuggestionsComponent\",\n  methods: {\n    async approveFAQ() {\n      var res = await axios.post('/api/faq', {\n        ticket_id: this.selected_ticket,\n        is_approved: true,\n        category: this.selected\n      });\n      console.log(res);\n      this.$router.go();\n    },\n    async rejectFAQ(ticket_id) {\n      var res = await axios.post('/api/faq', {\n        ticket_id: ticket_id,\n        is_approved: false\n      });\n      console.log(res);\n      this.$router.go();\n    }\n  },\n  data() {\n    return {\n      selected: null,\n      selected_ticket: null,\n      faq_ticket_ids: [],\n      faqs: [],\n      relevant_tickets: [],\n      categories: []\n    };\n  },\n  async created() {\n    var res3 = await axios.get('/api/category');\n    this.categories = res3.data.data;\n    var res = await axios.get('/api/faq');\n    this.faqs = res.data.data;\n    this.faq_ticket_ids = this.faqs.map(({\n      ticket_id\n    }) => ticket_id);\n    var res2 = await axios.get('/api/ticketAll');\n    for (var i = 0; i < res2.data.data.length; i++) {\n      if (res2.data.data[i].is_FAQ) {\n        // eslint-disable-next-line\n        if (this.faq_ticket_ids.includes(res2.data.data[i].ticket_id)) {} else {\n          this.relevant_tickets.push(res2.data.data[i]);\n        }\n      }\n    }\n  },\n  computed: {}\n};","map":{"version":3,"names":["axios","name","methods","approveFAQ","res","post","ticket_id","selected_ticket","is_approved","category","selected","console","log","$router","go","rejectFAQ","data","faq_ticket_ids","faqs","relevant_tickets","categories","created","res3","get","map","res2","i","length","is_FAQ","includes","push","computed"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\soft-engg-project-jan-2024-se-jan-1\\frontend\\src\\components\\ManageFAQComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"topic-container\">\r\n            <h3 style=\"color: aliceblue; text-align: center;\"><b>The following tickets have been suggested for FAQ </b></h3>\r\n            <br />\r\n            <hr />\r\n            <div class=\"container\" v-for=\"(t, index) in relevant_tickets\" :key=\"index\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-10\">\r\n                        <RouterLink :to=\"{ name: 'response', params: { ticketId: t.ticket_id } }\">\r\n                            <p class=\"ticket-title\">\r\n                                {{ t.title }}\r\n                            </p>\r\n                        </RouterLink>\r\n                        <p>{{ t.description }}</p>\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn upvote disabled\">^<br>{{ t.number_of_upvotes }}</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn btn-success rounded\" data-bs-toggle=\"modal\" data-bs-target=\"#faqModal\"\r\n                            @click=\"this.selected_ticket = t.ticket_id\"> Approve </button>\r\n                    </div>\r\n                    <div class=\"col-md-8\">\r\n                    </div>\r\n                    <div class=\"col-md-2\">\r\n                        <button class=\"btn btn-danger rounded\" @click=\"rejectFAQ(t.ticket_id)\"> Reject </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n        </div>\r\n        <br />\r\n        <!-- Modal -->\r\n        <div class=\"modal fade\" id=\"faqModal\" tabindex=\"-1\" aria-labelledby=\"faqModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"faqModalLabel\">Please choose the appropriate category</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <select v-model=\"selected\">\r\n                            <option disabled value=\"\">Please select one</option>\r\n                            <option v-for=\"(c, index) in categories\" :key=\"index\">{{ c }}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n                        <button type=\"button\" class=\"btn btn-success\" data-bs-dismiss=\"modal\"\r\n                            @click=\"approveFAQ()\">Submit</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\n//import router from '@/router';\r\n\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: \"ManageFAQSuggestionsComponent\",\r\n    methods: {\r\n        async approveFAQ() {\r\n            var res = await axios.post('/api/faq', {\r\n                ticket_id: this.selected_ticket,\r\n                is_approved: true,\r\n                category: this.selected\r\n            });\r\n            console.log(res);\r\n            this.$router.go();\r\n        },\r\n        async rejectFAQ(ticket_id) {\r\n            var res = await axios.post('/api/faq', {\r\n                ticket_id: ticket_id,\r\n                is_approved: false\r\n            });\r\n            console.log(res);\r\n            this.$router.go();\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            selected: null,\r\n            selected_ticket: null,\r\n            faq_ticket_ids: [],\r\n            faqs: [],\r\n            relevant_tickets: [],\r\n            categories: []\r\n        };\r\n\r\n    },\r\n    async created() {\r\n        var res3 = await axios.get('/api/category');\r\n        this.categories = res3.data.data;\r\n        var res = await axios.get('/api/faq');\r\n        this.faqs = res.data.data;\r\n        this.faq_ticket_ids = this.faqs.map(({ ticket_id }) => ticket_id)\r\n        var res2 = await axios.get('/api/ticketAll');\r\n        for (var i = 0; i < res2.data.data.length; i++) {\r\n            if (res2.data.data[i].is_FAQ) {\r\n                // eslint-disable-next-line\r\n                if (this.faq_ticket_ids.includes(res2.data.data[i].ticket_id)) { } else {\r\n                    this.relevant_tickets.push(res2.data.data[i]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.topic-container {\r\n    margin: 33px 63px;\r\n}\r\n\r\n.upvote {\r\n    font-size: 20px;\r\n}\r\n\r\n.ticket-title {\r\n    font-weight: bold;\r\n    font-size: 25px;\r\n}\r\n\r\n.btn a {\r\n    color: rgb(255, 255, 255);\r\n    text-decoration: none;\r\n}\r\n\r\na {\r\n    color: rgb(0, 0, 0);\r\n    text-decoration: none;\r\n}\r\n</style>"],"mappings":";AA6DA;;AAEA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAI,EAAE,+BAA+B;EACrCC,OAAO,EAAE;IACL,MAAMC,UAAUA,CAAA,EAAG;MACf,IAAIC,GAAE,GAAI,MAAMJ,KAAK,CAACK,IAAI,CAAC,UAAU,EAAE;QACnCC,SAAS,EAAE,IAAI,CAACC,eAAe;QAC/BC,WAAW,EAAE,IAAI;QACjBC,QAAQ,EAAE,IAAI,CAACC;MACnB,CAAC,CAAC;MACFC,OAAO,CAACC,GAAG,CAACR,GAAG,CAAC;MAChB,IAAI,CAACS,OAAO,CAACC,EAAE,EAAE;IACrB,CAAC;IACD,MAAMC,SAASA,CAACT,SAAS,EAAE;MACvB,IAAIF,GAAE,GAAI,MAAMJ,KAAK,CAACK,IAAI,CAAC,UAAU,EAAE;QACnCC,SAAS,EAAEA,SAAS;QACpBE,WAAW,EAAE;MACjB,CAAC,CAAC;MACFG,OAAO,CAACC,GAAG,CAACR,GAAG,CAAC;MAChB,IAAI,CAACS,OAAO,CAACC,EAAE,EAAE;IACrB;EACJ,CAAC;EACDE,IAAIA,CAAA,EAAG;IACH,OAAO;MACHN,QAAQ,EAAE,IAAI;MACdH,eAAe,EAAE,IAAI;MACrBU,cAAc,EAAE,EAAE;MAClBC,IAAI,EAAE,EAAE;MACRC,gBAAgB,EAAE,EAAE;MACpBC,UAAU,EAAE;IAChB,CAAC;EAEL,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACZ,IAAIC,IAAG,GAAI,MAAMtB,KAAK,CAACuB,GAAG,CAAC,eAAe,CAAC;IAC3C,IAAI,CAACH,UAAS,GAAIE,IAAI,CAACN,IAAI,CAACA,IAAI;IAChC,IAAIZ,GAAE,GAAI,MAAMJ,KAAK,CAACuB,GAAG,CAAC,UAAU,CAAC;IACrC,IAAI,CAACL,IAAG,GAAId,GAAG,CAACY,IAAI,CAACA,IAAI;IACzB,IAAI,CAACC,cAAa,GAAI,IAAI,CAACC,IAAI,CAACM,GAAG,CAAC,CAAC;MAAElB;IAAU,CAAC,KAAKA,SAAS;IAChE,IAAImB,IAAG,GAAI,MAAMzB,KAAK,CAACuB,GAAG,CAAC,gBAAgB,CAAC;IAC5C,KAAK,IAAIG,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAID,IAAI,CAACT,IAAI,CAACA,IAAI,CAACW,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,IAAID,IAAI,CAACT,IAAI,CAACA,IAAI,CAACU,CAAC,CAAC,CAACE,MAAM,EAAE;QAC1B;QACA,IAAI,IAAI,CAACX,cAAc,CAACY,QAAQ,CAACJ,IAAI,CAACT,IAAI,CAACA,IAAI,CAACU,CAAC,CAAC,CAACpB,SAAS,CAAC,EAAE,CAAE,OAAO;UACpE,IAAI,CAACa,gBAAgB,CAACW,IAAI,CAACL,IAAI,CAACT,IAAI,CAACA,IAAI,CAACU,CAAC,CAAC,CAAC;QACjD;MACJ;IACJ;EACJ,CAAC;EACDK,QAAQ,EAAE,CACV;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}