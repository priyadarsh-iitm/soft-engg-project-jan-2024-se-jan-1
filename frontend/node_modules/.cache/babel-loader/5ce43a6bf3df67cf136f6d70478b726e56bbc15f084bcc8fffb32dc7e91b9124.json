{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"AddTicketComponent\",\n  data() {\n    return {\n      title: \"\",\n      description: \"\",\n      results: null,\n      postOnDiscourse: false\n    };\n  },\n  watch: {\n    title: async function (val) {\n      let url = 'https://RRBO0FF8YF-dsn.algolia.net/1/indexes/sociogrammers_app/query';\n      // eslint-disable-next-line\n      let config = {\n        headers: {\n          'X-Algolia-Application-Id': 'RRBO0FF8YF',\n          'X-Algolia-API-Key': localStorage.getItem('alg-key')\n        }\n      };\n      // eslint-disable-next-line\n      let data = {\n        'query': val\n      };\n      var instance = axios.create();\n      delete instance.defaults.headers.common['secret_authtoken'];\n      const response = await instance.post(url, data, config);\n      this.results = response.data.hits;\n    }\n  },\n  methods: {\n    async addCard() {\n      var data = {\n        title: this.title,\n        description: this.description,\n        number_of_upvotes: 0,\n        is_read: false,\n        is_open: true,\n        is_offensive: false,\n        is_FAQ: false\n      };\n      data = JSON.stringify(data);\n      console.log(data);\n      await axios.post(\"/api/ticket\", data, {\n        headers: {\n          // \"secret_authtoken\": localStorage.getItem(\"token\"),\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => {\n        console.log(res);\n        if (res.status == 200) {\n          alert(\"Ticket Added Successfully\");\n          this.$router.push(\"/dashboard\");\n        } else {\n          alert(res.data.message);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","title","description","results","postOnDiscourse","watch","val","url","config","headers","localStorage","getItem","instance","create","defaults","common","response","post","hits","methods","addCard","number_of_upvotes","is_read","is_open","is_offensive","is_FAQ","JSON","stringify","console","log","then","res","status","alert","$router","push","message","catch","err"],"sources":["E:\\IIT MADRAS\\SE_ST\\SE PROJECT\\Project 1\\Intermediate Work\\Code\\soft-engg-project-jan-2024-se-jan-1\\frontend\\src\\components\\AddTicketComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container dark-mode\">\r\n        <!-- <div class=\"row justify-content-center\"> -->\r\n            <div class=\"col\">\r\n                <h4 class=\"text-center\" style=\"color: aqua; text-align: center;\">Add Ticket</h4>\r\n                <form @submit.prevent=\"addCard\">\r\n                    <div class=\"form-group\">\r\n                        <label style=\"color: #fff;\">Title</label>\r\n                        <i class=\"bi bi-patch-question-fill\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"As you type the title, similar queries will appear on the right. Please read them before creating a new ticket.\"></i>\r\n                        <input type=\"text\" v-model=\"title\" class=\"form-control\" placeholder=\"Enter title\" autocomplete=\"off\" required />\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label style=\"color: #fff;\">Description</label>\r\n                        <textarea v-model=\"description\" class=\"form-control\" placeholder=\"Enter description\" autocomplete=\"off\" required rows='10'></textarea>\r\n                    </div>\r\n                    <div class=\"form-group form-check\">\r\n                        <input type=\"checkbox\" id=\"postOnDiscourse\" v-model=\"postOnDiscourse\" class=\"form-check-input\">\r\n                        <label for=\"postOnDiscourse\" class=\"form-check-label\" style=\"color: #fff;\">Post on Discourse</label>\r\n                    </div>\r\n                    <button type=\"submit\" class=\"btn btn-success\">Submit</button>\r\n                </form>\r\n            </div>\r\n            <div class=\"col-sm\">\r\n                <div class=\"container overflow-auto\">\r\n                    <p v-if=\"results\" style=\"color: #fff;\">Please look at the following similar tickets before posting a new query</p>\r\n                    <div class=\"search-result\" v-for=\"(result, index) in results\" :key=\"index\">\r\n                        <h3>\r\n                            <RouterLink :to=\"{ name: 'response', params: { ticketId: result.ticket_id } }\">\r\n                                <div v-html=\"result._highlightResult.title.value\" style=\"color: #fff;\"></div>\r\n                            </RouterLink>\r\n                        </h3>\r\n                        <div v-html=\"result._highlightResult.description.value\" style=\"color: #fff;\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    <!-- </div> -->\r\n</template>\r\n\r\n  \r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"AddTicketComponent\",\r\n    data() {\r\n        return {\r\n            title: \"\",\r\n            description: \"\",\r\n            results: null,\r\n            postOnDiscourse: false\r\n        };\r\n    },\r\n    watch: {\r\n        title: async function (val) {\r\n           let url = 'https://RRBO0FF8YF-dsn.algolia.net/1/indexes/sociogrammers_app/query'\r\n           // eslint-disable-next-line\r\n           let config = {\r\n                headers: {\r\n                    'X-Algolia-Application-Id': 'RRBO0FF8YF',\r\n                    'X-Algolia-API-Key': localStorage.getItem('alg-key'),\r\n                        }\r\n                    }\r\n            // eslint-disable-next-line\r\n            let data = {\r\n                'query': val\r\n            }\r\n            var instance = axios.create();\r\n            delete instance.defaults.headers.common['secret_authtoken'];\r\n            const response = await instance.post(url, data, config)\r\n            this.results = response.data.hits\r\n        }\r\n    },\r\n    methods: {\r\n        async addCard() {\r\n            var data = {\r\n                title: this.title,\r\n                description: this.description,\r\n                number_of_upvotes : 0,\r\n                is_read: false,\r\n                is_open: true,\r\n                is_offensive: false,\r\n                is_FAQ: false\r\n                \r\n            };\r\n            data = JSON.stringify(data);\r\n            console.log(data);\r\n            await axios.post(\"/api/ticket\",data, {\r\n            headers: {\r\n                    // \"secret_authtoken\": localStorage.getItem(\"token\"),\r\n                    \"Content-Type\": \"application/json\"\r\n            }\r\n            }).then((res) => {\r\n                console.log(res);\r\n                if (res.status == 200) {\r\n                    alert(\"Ticket Added Successfully\");\r\n                    this.$router.push(\"/dashboard\");\r\n                } else {\r\n                    alert(res.data.message);\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });       \r\n            \r\n        }\r\n    },\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n.container {\r\n    font-family: \"Muli\", sans-serif;\r\n    /* display: flex;\r\n     */\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 75vh;\r\n    overflow: hidden;\r\n    margin-top: 75px;\r\n}\r\n\r\nlabel {\r\n    font-size: 1.2rem;\r\n    font-weight: 500;\r\n    margin-bottom: 5px;\r\n}\r\n\r\nh1 {\r\n    font-size: 3rem;\r\n    font-weight: 700;\r\n    margin-bottom: 2rem;\r\n}\r\n\r\n.form-group {\r\n    margin-bottom: 1.5rem;\r\n}\r\n.topic-container {\r\n    margin: 33px 63px;\r\n}\r\n\r\n.ticket-title {\r\n    font-weight: bold;\r\n    font-size: 25px;\r\n}\r\n\r\n</style>\r\n  "],"mappings":";AAyCA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACXC,IAAI,EAAE,oBAAoB;EAC1BC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,IAAI;MACbC,eAAe,EAAE;IACrB,CAAC;EACL,CAAC;EACDC,KAAK,EAAE;IACHJ,KAAK,EAAE,eAAAA,CAAgBK,GAAG,EAAE;MACzB,IAAIC,GAAE,GAAI,sEAAqE;MAC/E;MACA,IAAIC,MAAK,GAAI;QACRC,OAAO,EAAE;UACL,0BAA0B,EAAE,YAAY;UACxC,mBAAmB,EAAEC,YAAY,CAACC,OAAO,CAAC,SAAS;QAC/C;MACJ;MACR;MACA,IAAIX,IAAG,GAAI;QACP,OAAO,EAAEM;MACb;MACA,IAAIM,QAAO,GAAId,KAAK,CAACe,MAAM,EAAE;MAC7B,OAAOD,QAAQ,CAACE,QAAQ,CAACL,OAAO,CAACM,MAAM,CAAC,kBAAkB,CAAC;MAC3D,MAAMC,QAAO,GAAI,MAAMJ,QAAQ,CAACK,IAAI,CAACV,GAAG,EAAEP,IAAI,EAAEQ,MAAM;MACtD,IAAI,CAACL,OAAM,GAAIa,QAAQ,CAAChB,IAAI,CAACkB,IAAG;IACpC;EACJ,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,OAAOA,CAAA,EAAG;MACZ,IAAIpB,IAAG,GAAI;QACPC,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBC,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7BmB,iBAAgB,EAAI,CAAC;QACrBC,OAAO,EAAE,KAAK;QACdC,OAAO,EAAE,IAAI;QACbC,YAAY,EAAE,KAAK;QACnBC,MAAM,EAAE;MAEZ,CAAC;MACDzB,IAAG,GAAI0B,IAAI,CAACC,SAAS,CAAC3B,IAAI,CAAC;MAC3B4B,OAAO,CAACC,GAAG,CAAC7B,IAAI,CAAC;MACjB,MAAMF,KAAK,CAACmB,IAAI,CAAC,aAAa,EAACjB,IAAI,EAAE;QACrCS,OAAO,EAAE;UACD;UACA,cAAc,EAAE;QACxB;MACA,CAAC,CAAC,CAACqB,IAAI,CAAEC,GAAG,IAAK;QACbH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;QAChB,IAAIA,GAAG,CAACC,MAAK,IAAK,GAAG,EAAE;UACnBC,KAAK,CAAC,2BAA2B,CAAC;UAClC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;QACnC,OAAO;UACHF,KAAK,CAACF,GAAG,CAAC/B,IAAI,CAACoC,OAAO,CAAC;QAC3B;MACJ,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;QACdV,OAAO,CAACC,GAAG,CAACS,GAAG,CAAC;MACpB,CAAC,CAAC;IAEN;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}