{"version":3,"file":"StateResults.vue_vue&type=script&lang.js","sources":["../../../../src/components/StateResults.vue"],"sourcesContent":["<template>\n  <div :class=\"suit()\" v-if=\"state && state.state && state.results\">\n    <slot v-bind=\"stateResults\">\n      <p>\n        Use this component to have a different layout based on a certain state.\n      </p>\n      <p>Fill in the slot, and get access to the following things:</p>\n      <pre>results: {{ Object.keys(state.results) }}</pre>\n      <pre>state: {{ Object.keys(state.state) }}</pre>\n      <pre>status: {{ state.status }}</pre>\n      <pre>error: {{ state.error }}</pre>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { isVue3 } from '../util/vue-compat';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\nimport { _objectSpread } from '../util/polyfills';\n\nexport default {\n  name: 'AisStateResults',\n  mixins: [\n    createWidgetMixin({ connector: true }),\n    createSuitMixin({ name: 'StateResults' }),\n  ],\n  props: {\n    catchError: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      renderFn: () => {\n        const { status, error } = this.instantSearchInstance;\n        const results = this.getParentIndex().getResults();\n        const helper = this.getParentIndex().getHelper();\n        const state = helper ? helper.state : null;\n\n        // @MAJOR no longer spread this inside `results`\n        this.state = {\n          results,\n          state,\n          status,\n          error,\n        };\n      },\n    };\n  },\n  created() {\n    this.instantSearchInstance.addListener('render', this.renderFn);\n    this.renderFn();\n  },\n  [isVue3 ? 'beforeUnmount' : 'beforeDestroy']() {\n    if (this.widget) {\n      this.instantSearchInstance.removeListener('render', this.renderFn);\n      if (this.errorFn) {\n        this.instantSearchInstance.removeListener('error', this.errorFn);\n      }\n    }\n  },\n  watch: {\n    catchError: {\n      immediate: true,\n      handler(catchError) {\n        if (catchError) {\n          this.errorFn = () => {};\n          this.instantSearchInstance.addListener('error', this.errorFn);\n        } else if (this.errorFn) {\n          this.instantSearchInstance.removeListener('error', this.errorFn);\n          this.errorFn = undefined;\n        }\n      },\n    },\n  },\n  computed: {\n    stateResults() {\n      const { results, state, status, error } = this.state;\n      return _objectSpread({}, results, { results, state, status, error });\n    },\n  },\n};\n</script>\n"],"names":["name","mixins","createWidgetMixin","connector","createSuitMixin","props","catchError","type","Boolean","default","data","renderFn","this","instantSearchInstance","results","getParentIndex","getResults","helper","getHelper","state","status","error","created","addListener","widget","removeListener","errorFn","watch","immediate","handler","undefined","computed","stateResults","_objectSpread"],"mappings":"kOAqBe,CACbA,KAAM,kBACNC,OAAQ,CACNC,EAAkB,CAAEC,WAAW,IAC/BC,EAAgB,CAAEJ,KAAM,kBAE1BK,MAAO,CACLC,WAAY,CACVC,KAAMC,QACNC,SAAS,IAGbC,2BACE,MAAO,CACLC,0BAC4BC,EAAKC,2CACzBC,EAAUF,EAAKG,iBAAiBC,aAChCC,EAASL,EAAKG,iBAAiBG,YAC/BC,EAAQF,EAASA,EAAOE,MAAQ,KAGtCP,EAAKO,MAAQ,SACXL,QACAK,SACAC,QACAC,MAKRC,mBACEV,KAAKC,sBAAsBU,YAAY,SAAUX,KAAKD,UACtDC,KAAKD,cAEoC,yBACrCC,KAAKY,SACPZ,KAAKC,sBAAsBY,eAAe,SAAUb,KAAKD,UACrDC,KAAKc,SACPd,KAAKC,sBAAsBY,eAAe,QAASb,KAAKc,aAI9DC,MAAO,CACLrB,WAAY,CACVsB,WAAW,EACXC,iBAAQvB,GACFA,GACFM,KAAKc,qBACLd,KAAKC,sBAAsBU,YAAY,QAASX,KAAKc,UAC5Cd,KAAKc,UACdd,KAAKC,sBAAsBY,eAAe,QAASb,KAAKc,SACxDd,KAAKc,aAAUI,QAKvBC,SAAU,CACRC,8BAC4CpB,KAAKO,iDAC/C,OAAOc,EAAc,GAAInB,EAAS,SAAEA,QAASK,SAAOC,QAAQC"}